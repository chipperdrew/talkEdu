{% extends "base.html" %}

{% block content %}
	{{ block.super }}
	<form method="POST" action="{% url 'post_new' %}?next={{request.path}}">
		{% csrf_token %}
		{{ form.as_p }}
		<button id="id_post_button" type="submit">Post</button>	
	</form>

	<div>
	{% for post in posts %}
		<a href="{% url 'post_page' post_id=post.id %}"><h4>{{ post.title }}</h4></a>
		<p>
			Posted by <a href="{% url 'user_page' user=post.user_id %}">{{ post.user_id }}</a>
			at {{ post.time_created }} and last modified at {{ post.time_modified }}
			User type={{ post.user_id.get_user_type_display }}
			{% if post.user_id == request.user %}
				<a href="{% url 'post_edit' id=post.id %}?next={{request.path}}">Edit</a>
				<a href="{% url 'post_delete' id=post.id %}?next={{request.path}}"
				onclick="return confirm('Your post and all related comments will be deleted. Proceed?')">Delete</a>
			{% endif %}
		</p>
	{% endfor %}
	</div> 
{% endblock content %}
