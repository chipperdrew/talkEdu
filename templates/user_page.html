{% extends "base.html" %}
{% load dictionary_extras %} {# For dictionary access to variable keys and key content #}

{% block title %}User {{ user_object.username }} - YouTalkEdu{% endblock title %}

{% block content %}
	<div class="move_right">
	<h3 style="color:{{ user_object.COLORS|get_item:user_object.user_type}}">User {{ user_object.username}}: {{ user_object.get_user_type_display }}</h3>
	{% if user_object == request.user %}
		<p><a href="{% url 'pass_change' %}">Change your password</a></p>
		<p><a href="{% url 'user_type_change' %}">Change your account type</a></p>
	{% endif %}
	<h4> Overall user rating: {{ user_object.vote_percentage }}</h4>
	<p>Last logged in on {{ user_object.last_login.date }} at {{ user_object.last_login.time }}</p>


	{# Posts #}
	<br/>
	{% if user_object == request.user %}
		<h4 class="item_titles">Here are your 10 most recent posts:</h4>
	{% else %}
		<h4 class="item_titles">Here are the 10 most recent posts for {{ user_object.username }}:</h4>
	{% endif %}
	&nbsp; &nbsp;<div class="overall_rating_label"><strong><u>Overall Rating</u></strong></div>
	{% for post in user_posts %}
		<p>
			<div class="item_titles" style="float:left; text-overflow:ellipsis; overflow:hidden; white-space: nowrap">
				{{ forloop.counter }}: &nbsp; <a href="{% url 'post_page' post_id=post.id %}">{{ post.title }}</a>
			</div>&nbsp;
			<div class="item_ratings">
				&nbsp; &nbsp; {{ post.vote_percentage }} 
				({{ post.total_votes }} vote{{ post.total_votes|pluralize }})
			</div>
		</p>
	{% endfor %}


	{# Comments #}
	<br/>
	{% if user_object == request.user %}
		<h4 class="item_titles">Here are your 10 most recent comments:</h4>
	{% else %}
		<h4 class="item_titles">Here are the 10 most recent comments for {{ user_object.username }}:</h4>
	{% endif %}
	&nbsp; &nbsp;<div class="overall_rating_label"><strong><u>Overall Rating</u></strong></div>
	&nbsp;<strong><u>Related post</u></strong>
	{% for comment in user_comments %}
		<p>
			<div class="item_titles" style="float:left; text-overflow:ellipsis; overflow:hidden; white-space: nowrap">
				{{ forloop.counter }}: {{ comment.content }}
			</div>&nbsp;
			<div class="item_ratings">			
				&nbsp; &nbsp; {{ comment.vote_percentage }} 
				({{ comment.total_votes }} vote{{ comment.total_votes|pluralize }})
			</div>
			<span>
				&nbsp;&nbsp;&nbsp;&nbsp;<a href="{% url 'post_page' comment.post_id.id %}" style="display:inline-block; width:300px">{{ comment.post_id.title|truncatechars:20 }}</a>
			</span>

		</p>
	{% endfor %}
	</div> {# End move_right #}
{% endblock content %}
